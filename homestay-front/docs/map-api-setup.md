# 🗺️ 高德地图 API 配置指南

## 📋 申请步骤

### 1. 注册高德开发者账号

访问 [高德开放平台](https://console.amap.com/) 并注册账号

### 2. 创建应用

1. 进入控制台，点击「应用管理」→「我的应用」
2. 点击「创建新应用」
3. 填写应用信息：
   - 应用名称：`民宿平台地图服务`
   - 应用类型：`Web应用`

### 3. 添加 Key

1. 在应用详情页点击「添加 Key」
2. 配置 Key 信息：
   - **Key 名称**：`homestay-map-service`
   - **服务平台**：选择「Web 服务」
   - **可使用服务**：勾选以下 API
     - ✅ 地理编码 API
     - ✅ 逆地理编码 API
     - ✅ 周边搜索 API
     - ✅ 静态地图 API
   - **IP 白名单**：开发环境填入 `0.0.0.0/0`

### 4. 配置代码

1. 复制获得的 API Key
2. 打开 `src/utils/mapService.ts`
3. 替换以下代码中的 API Key：

```typescript
const AMAP_CONFIG = {
  apiKey: "your-actual-api-key-here", // 🔑 在这里粘贴你的API Key
  version: "2.0",
  plugins: ["AMap.Geocoder", "AMap.PlaceSearch"],
};
```

## 🚀 功能特性

### ✅ 已实现功能

- 📍 **地理编码**：根据地址获取经纬度坐标
- 🗺️ **静态地图**：生成带标记的地图图片
- 🔍 **周边搜索**：查找附近的设施（地铁站、商场、医院等）
- 🛡️ **隐私保护**：坐标随机偏移保护用户隐私
- 📱 **响应式设计**：适配移动端显示
- 🎭 **模拟模式**：无 API Key 时使用模拟数据

### 🔮 待实现功能

- 🌐 **交互式地图**：点击查看详细地图
- 🚗 **路线规划**：提供导航功能
- 📊 **实时数据**：公交、地铁实时信息
- 🏷️ **自定义标记**：房源特色标注

## 💡 使用说明

### 模拟模式

如果还没有申请 API Key，系统会自动进入模拟模式：

- 显示预设城市坐标
- 使用占位图作为地图
- 提供模拟的周边设施数据

### 生产模式

配置 API Key 后，将使用真实的高德地图服务：

- 精确的地理编码
- 真实的静态地图
- 实时的周边设施查询

## 🔒 安全建议

### 开发环境

- IP 白名单可设置为 `0.0.0.0/0`
- 调用量通常在免费额度内

### 生产环境

- **务必**限制 IP 白名单为你的服务器 IP
- 监控 API 调用量，避免超额费用
- 考虑启用防盗链功能

## 📞 技术支持

如果遇到问题，可以：

1. 查看 [高德地图开发文档](https://lbs.amap.com/api/)
2. 检查浏览器控制台的错误信息
3. 确认 API Key 是否正确配置
4. 验证所选服务是否开通

---

💡 **提示**：首次使用可能需要等待几分钟 API Key 生效
